apiVersion: v1
kind: Pod
metadata:
  name: nginx-proxy
  labels:
    app: ngiinx-proxy
spec:
  volumes:
    - name: nginx-logs
      hostPath:
       path: /var/log/nginx
       type: FileOrCreate
  containers:
    - name: nginx-proxy
      image: laurentbel/nginx-basic-auth
      ports:
        - containerPort: 80
      env:
        - FORWARD_HOST=loki
        - FORWARD_PORT=3100
        - BASIC_USERNAME=xcenter
        - BASIC_PASSWORD=xc3nt3rl1nx
      volumeMounts:
        - name: nginx-logs
          mountPath: /var/log/nginx
